"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MoodAnalyticsPage = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const persona_1 = require("../../hooks/persona");
const useMoodRecommendations_1 = require("../../hooks/useMoodRecommendations");
const useLibraryStore_1 = require("../../stores/useLibraryStore");
const SummaryCard_1 = require("./SummaryCard");
const MoodDistribution_1 = require("./MoodDistribution");
const GenreAffinity_1 = require("./GenreAffinity");
const PersonalInsights_1 = require("./PersonalInsights");
const MoodAnalyticsPage = ({ analyticsData, getMoodEmoji, getMoodColor, AnimatedNumber, onCardClick, onMoodClick, onGenreClick, onInsightClick }) => {
    // Get persona data for enhanced analytics
    const persona = (0, persona_1.useLibraryPersona)();
    const { games } = (0, useLibraryStore_1.useLibraryStore)();
    const { primaryMoodInfo, hasRecommendations } = (0, useMoodRecommendations_1.useMoodRecommendations)({ games });
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-8", children: [persona && ((0, jsx_runtime_1.jsx)("div", { className: "animate-fade-in-up", style: { animationDelay: '0.3s' }, children: (0, jsx_runtime_1.jsx)(SummaryCard_1.SummaryCard, { title: "Gaming Persona", icon: "\uD83C\uDFAE", value: persona.traits?.archetypeId || 'Unknown', subtitle: `${persona.traits?.intensity} intensity â€¢ ${Math.round((persona.confidence || 0) * 100)}% confidence`, progress: (persona.confidence || 0) * 100, progressColor: "from-purple-500 to-pink-500", onClick: () => onCardClick?.('persona', persona), children: (0, jsx_runtime_1.jsxs)("div", { className: "mt-4 grid grid-cols-2 gap-2 text-xs", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-gray-400", children: "Pacing" }), (0, jsx_runtime_1.jsx)("div", { className: "text-white font-medium", children: persona.traits?.pacing })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-gray-400", children: "Social" }), (0, jsx_runtime_1.jsx)("div", { className: "text-white font-medium", children: persona.traits?.socialStyle })] })] }) }) })), hasRecommendations && primaryMoodInfo && ((0, jsx_runtime_1.jsx)("div", { className: "animate-fade-in-up", style: { animationDelay: '0.4s' }, children: (0, jsx_runtime_1.jsx)(SummaryCard_1.SummaryCard, { title: "Current Mood", icon: primaryMoodInfo.emoji, value: primaryMoodInfo.name, subtitle: "Active mood state", progress: 75, progressColor: primaryMoodInfo.color?.replace('from-', 'from-').replace(' to-', ' to-') || 'from-blue-500 to-cyan-500', onClick: () => onCardClick?.('currentMood', primaryMoodInfo) }) })), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in-up", style: { animationDelay: '0.6s' }, children: [(0, jsx_runtime_1.jsx)(SummaryCard_1.SummaryCard, { title: "Total Playtime", icon: "\u23F1\uFE0F", value: (0, jsx_runtime_1.jsx)(AnimatedNumber, { value: Math.round(analyticsData.gamingPatterns.totalPlaytime), suffix: "h" }), subtitle: (0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(AnimatedNumber, { value: Math.round(analyticsData.gamingPatterns.averageSessionLength), suffix: "min" }), " avg session"] }), progress: Math.min((analyticsData.gamingPatterns.totalPlaytime / 100) * 100, 100), onClick: () => onCardClick?.('totalPlaytime', analyticsData.gamingPatterns) }), (0, jsx_runtime_1.jsx)(SummaryCard_1.SummaryCard, { title: "Favorite Mood", icon: getMoodEmoji(analyticsData.gamingPatterns.mostPlayedMood), value: analyticsData.gamingPatterns.mostPlayedMood, subtitle: (0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(AnimatedNumber, { value: analyticsData.gamingPatterns.moodDistribution[analyticsData.gamingPatterns.mostPlayedMood] }), " sessions"] }), onClick: () => onCardClick?.('favoriteMood', analyticsData.gamingPatterns), children: (0, jsx_runtime_1.jsxs)("div", { className: "mt-4 relative w-12 h-12 mx-auto", children: [(0, jsx_runtime_1.jsx)("div", { className: "absolute inset-0 bg-gray-700/50 rounded-full" }), (0, jsx_runtime_1.jsx)("div", { className: `absolute inset-0 ${getMoodColor(analyticsData.gamingPatterns.mostPlayedMood)} rounded-full transition-all duration-500`, style: {
                                        clipPath: `polygon(50% 50%, 50% 0%, ${50 + (analyticsData.gamingPatterns.moodDistribution[analyticsData.gamingPatterns.mostPlayedMood] / analyticsData.moodTrends.length) * 100}% 0%, 50% 50%)`
                                    } })] }) }), (0, jsx_runtime_1.jsx)(SummaryCard_1.SummaryCard, { title: "Recommendation Success", icon: "\uD83C\uDFAF", value: (0, jsx_runtime_1.jsx)(AnimatedNumber, { value: analyticsData.recommendationMetrics.successRate, suffix: "%" }), subtitle: (0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(AnimatedNumber, { value: analyticsData.recommendationMetrics.acceptedRecommendations }), " of ", (0, jsx_runtime_1.jsx)(AnimatedNumber, { value: analyticsData.recommendationMetrics.totalRecommendations }), " accepted"] }), progress: analyticsData.recommendationMetrics.successRate, progressColor: "from-green-500 to-emerald-500", onClick: () => onCardClick?.('recommendationSuccess', analyticsData.recommendationMetrics) }), (0, jsx_runtime_1.jsx)(SummaryCard_1.SummaryCard, { title: "Mood Stability", icon: "\uD83D\uDCCA", value: (0, jsx_runtime_1.jsx)(AnimatedNumber, { value: Math.round(analyticsData.userInsights.moodStability * 100), suffix: "%" }), subtitle: "Consistent mood patterns", progress: analyticsData.userInsights.moodStability * 100, progressColor: "from-blue-500 to-purple-500", onClick: () => onCardClick?.('moodStability', analyticsData.userInsights), children: (0, jsx_runtime_1.jsxs)("div", { className: "mt-4 flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)("div", { className: "flex-1 bg-gray-700/50 rounded-full h-2", children: (0, jsx_runtime_1.jsx)("div", { className: "h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500", style: { width: `${analyticsData.userInsights.moodStability * 100}%` } }) }), (0, jsx_runtime_1.jsx)("div", { className: `w-2 h-2 rounded-full ${analyticsData.userInsights.moodStability > 0.7 ? 'bg-green-500' : analyticsData.userInsights.moodStability > 0.4 ? 'bg-yellow-500' : 'bg-red-500'}` })] }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8 animate-fade-in-up", style: { animationDelay: '0.8s' }, children: [(0, jsx_runtime_1.jsx)(MoodDistribution_1.MoodDistribution, { moodDistribution: analyticsData.gamingPatterns.moodDistribution, totalTrends: analyticsData.moodTrends.length, getMoodEmoji: getMoodEmoji, getMoodColor: getMoodColor, onMoodClick: onMoodClick }), (0, jsx_runtime_1.jsx)(GenreAffinity_1.GenreAffinity, { genreAffinity: analyticsData.userInsights.genreAffinity, mostPlayedMood: analyticsData.gamingPatterns.mostPlayedMood, onGenreClick: onGenreClick })] }), (0, jsx_runtime_1.jsx)("div", { className: "animate-fade-in-up", style: { animationDelay: '1.0s' }, children: (0, jsx_runtime_1.jsx)(PersonalInsights_1.PersonalInsights, { bestGamingTime: analyticsData.userInsights.bestGamingTime, preferredSessionLength: analyticsData.userInsights.preferredSessionLength, topRecommendedMoods: analyticsData.recommendationMetrics.topRecommendedMoods, getMoodEmoji: getMoodEmoji, onInsightClick: onInsightClick }) })] }));
};
exports.MoodAnalyticsPage = MoodAnalyticsPage;
