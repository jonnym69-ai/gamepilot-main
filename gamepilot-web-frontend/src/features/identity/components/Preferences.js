"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Preferences = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const localStorage_1 = require("../services/localStorage");
const Preferences = ({ onPreferencesUpdate }) => {
    const localStorageService = new localStorage_1.LocalStorageService();
    const [preferences, setPreferences] = (0, react_1.useState)(null);
    const [editForm, setEditForm] = (0, react_1.useState)({});
    const [customItems, setCustomItems] = (0, react_1.useState)([]);
    const [showAddCustomItem, setShowAddCustomItem] = (0, react_1.useState)(false);
    const [newCustomItem, setNewCustomItem] = (0, react_1.useState)({
        name: '',
        value: '',
        type: 'text',
        category: 'general',
        order: 0,
        isPublic: false,
        options: []
    });
    const [isLoading, setIsLoading] = (0, react_1.useState)(true);
    (0, react_1.useEffect)(() => {
        const loadPreferences = () => {
            const userPreferences = localStorageService.getUserPreferences();
            if (userPreferences) {
                setPreferences(userPreferences);
                setEditForm(userPreferences);
                setCustomItems(userPreferences.customItems || []);
            }
            else {
                // Initialize with default data
                const defaultPreferences = localStorageService.initializeDefaultData().preferences;
                setPreferences(defaultPreferences);
                setEditForm(defaultPreferences);
                setCustomItems(defaultPreferences.customItems || []);
            }
            setIsLoading(false);
        };
        loadPreferences();
    }, []);
    const handleSave = () => {
        if (!preferences)
            return;
        const updatedPreferences = {
            ...preferences,
            ...editForm,
            notifications: { ...preferences.notifications, ...editForm.notifications },
            privacy: { ...preferences.privacy, ...editForm.privacy },
            display: { ...preferences.display, ...editForm.display },
            customItems
        };
        localStorageService.setUserPreferences(updatedPreferences);
        setPreferences(updatedPreferences);
        setShowAddCustomItem(false);
        onPreferencesUpdate?.(updatedPreferences);
    };
    const handleReset = () => {
        const defaultPreferences = localStorageService.initializeDefaultData().preferences;
        setEditForm(defaultPreferences);
    };
    const handleInputChange = (section, field, value) => {
        if (section === 'notifications' || section === 'privacy' || section === 'display') {
            setEditForm(prev => ({
                ...prev,
                [section]: {
                    ...prev[section],
                    [field]: value
                }
            }));
        }
        else {
            setEditForm(prev => ({ ...prev, [field]: value }));
        }
    };
    const handleAddCustomItem = () => {
        if (!newCustomItem.name?.trim())
            return;
        const item = {
            id: `custom-${Date.now()}`,
            name: newCustomItem.name.trim(),
            value: newCustomItem.type === 'boolean' ? false : (newCustomItem.value || ''),
            type: newCustomItem.type || 'text',
            category: newCustomItem.category || 'general',
            order: customItems.length,
            isPublic: newCustomItem.isPublic || false,
            options: newCustomItem.options || []
        };
        setCustomItems([...customItems, item]);
        setNewCustomItem({
            name: '',
            value: '',
            type: 'text',
            category: 'general',
            order: 0,
            isPublic: false,
            options: []
        });
        setShowAddCustomItem(false);
    };
    const handleUpdateCustomItem = (itemId, updates) => {
        setCustomItems(customItems.map(item => item.id === itemId ? { ...item, ...updates } : item));
    };
    const handleRemoveCustomItem = (itemId) => {
        setCustomItems(customItems.filter(item => item.id !== itemId));
    };
    const handleReorderCustomItems = (fromIndex, toIndex) => {
        const reordered = [...customItems];
        const [moved] = reordered.splice(fromIndex, 1);
        reordered.splice(toIndex, 0, moved);
        // Update order values
        const updated = reordered.map((item, index) => ({ ...item, order: index }));
        setCustomItems(updated);
    };
    const getCustomItemsByCategory = (category) => {
        return customItems
            .filter(item => item.category === category)
            .sort((a, b) => a.order - b.order);
    };
    if (isLoading) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "glass-morphism rounded-xl p-8 text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center", children: (0, jsx_runtime_1.jsx)("span", { className: "text-3xl", children: "\u2699\uFE0F" }) }), (0, jsx_runtime_1.jsx)("p", { className: "text-gray-400", children: "Loading preferences..." })] }));
    }
    if (!preferences) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "glass-morphism rounded-xl p-8 text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center", children: (0, jsx_runtime_1.jsx)("span", { className: "text-3xl", children: "\u26A0\uFE0F" }) }), (0, jsx_runtime_1.jsx)("p", { className: "text-gray-400", children: "Unable to load preferences" })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: "glass-morphism rounded-xl p-6 cinematic-shadow", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between mb-6", children: [(0, jsx_runtime_1.jsxs)("h2", { className: "text-2xl font-semibold text-white flex items-center gap-3", children: [(0, jsx_runtime_1.jsx)("span", { children: "\u2699\uFE0F" }), "Preferences"] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-3", children: [(0, jsx_runtime_1.jsx)("button", { onClick: handleReset, className: "px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors", children: "Reset to Default" }), (0, jsx_runtime_1.jsx)("button", { onClick: handleSave, className: "px-4 py-2 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-lg hover:opacity-90 transition-opacity", children: "Save Changes" })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-lg font-medium text-white mb-4", children: "General" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium text-gray-300 mb-2", children: "Theme" }), (0, jsx_runtime_1.jsxs)("select", { value: editForm.theme || 'dark', onChange: (e) => handleInputChange('theme', 'theme', e.target.value), className: "w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none", children: [(0, jsx_runtime_1.jsx)("option", { value: "dark", children: "\uD83C\uDF19 Dark" }), (0, jsx_runtime_1.jsx)("option", { value: "light", children: "\u2600\uFE0F Light" }), (0, jsx_runtime_1.jsx)("option", { value: "auto", children: "\uD83D\uDD04 Auto" })] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium text-gray-300 mb-2", children: "Language" }), (0, jsx_runtime_1.jsxs)("select", { value: editForm.language || 'en', onChange: (e) => handleInputChange('language', 'language', e.target.value), className: "w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none", children: [(0, jsx_runtime_1.jsx)("option", { value: "en", children: "English" }), (0, jsx_runtime_1.jsx)("option", { value: "es", children: "Espa\u00F1ol" }), (0, jsx_runtime_1.jsx)("option", { value: "fr", children: "Fran\u00E7ais" }), (0, jsx_runtime_1.jsx)("option", { value: "de", children: "Deutsch" }), (0, jsx_runtime_1.jsx)("option", { value: "ja", children: "\u65E5\u672C\u8A9E" })] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium text-gray-300 mb-2", children: "Timezone" }), (0, jsx_runtime_1.jsxs)("select", { value: editForm.timezone || 'UTC', onChange: (e) => handleInputChange('timezone', 'timezone', e.target.value), className: "w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none", children: [(0, jsx_runtime_1.jsx)("option", { value: "UTC", children: "UTC" }), (0, jsx_runtime_1.jsx)("option", { value: "America/New_York", children: "Eastern Time" }), (0, jsx_runtime_1.jsx)("option", { value: "America/Chicago", children: "Central Time" }), (0, jsx_runtime_1.jsx)("option", { value: "America/Denver", children: "Mountain Time" }), (0, jsx_runtime_1.jsx)("option", { value: "America/Los_Angeles", children: "Pacific Time" }), (0, jsx_runtime_1.jsx)("option", { value: "Europe/London", children: "London" }), (0, jsx_runtime_1.jsx)("option", { value: "Europe/Paris", children: "Paris" }), (0, jsx_runtime_1.jsx)("option", { value: "Asia/Tokyo", children: "Tokyo" })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-lg font-medium text-white mb-4", children: "Display" }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.display?.compactMode || false, onChange: (e) => handleInputChange('display', 'compactMode', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Compact Mode" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Show more content in less space" })] })] }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.display?.showGameCovers !== false, onChange: (e) => handleInputChange('display', 'showGameCovers', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Show Game Covers" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Display game cover images" })] })] }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.display?.animateTransitions !== false, onChange: (e) => handleInputChange('display', 'animateTransitions', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Animate Transitions" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Enable smooth animations" })] })] }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.display?.showRatings !== false, onChange: (e) => handleInputChange('display', 'showRatings', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Show Ratings" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Display game ratings" })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-lg font-medium text-white mb-4", children: "Notifications" }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.notifications?.email !== false, onChange: (e) => handleInputChange('notifications', 'email', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Email Notifications" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Receive updates via email" })] })] }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.notifications?.push !== false, onChange: (e) => handleInputChange('notifications', 'push', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Push Notifications" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Browser push notifications" })] })] }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.notifications?.achievements !== false, onChange: (e) => handleInputChange('notifications', 'achievements', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Achievement Alerts" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Notify about new achievements" })] })] }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.notifications?.recommendations !== false, onChange: (e) => handleInputChange('notifications', 'recommendations', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Recommendations" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Get personalized game suggestions" })] })] }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.notifications?.friendActivity || false, onChange: (e) => handleInputChange('notifications', 'friendActivity', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Friend Activity" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Updates about friends' gaming" })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-lg font-medium text-white mb-4", children: "Privacy" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium text-gray-300 mb-2", children: "Profile Visibility" }), (0, jsx_runtime_1.jsxs)("select", { value: editForm.privacy?.profileVisibility || 'private', onChange: (e) => handleInputChange('privacy', 'profileVisibility', e.target.value), className: "w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none", children: [(0, jsx_runtime_1.jsx)("option", { value: "public", children: "\uD83C\uDF0D Public" }), (0, jsx_runtime_1.jsx)("option", { value: "friends", children: "\uD83D\uDC65 Friends Only" }), (0, jsx_runtime_1.jsx)("option", { value: "private", children: "\uD83D\uDD12 Private" })] }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500 mt-1", children: "Control who can see your profile" })] }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.privacy?.showPlaytime !== false, onChange: (e) => handleInputChange('privacy', 'showPlaytime', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Show Playtime" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Display your total playtime" })] })] }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.privacy?.showAchievements !== false, onChange: (e) => handleInputChange('privacy', 'showAchievements', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Show Achievements" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Display your achievements" })] })] }), (0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-3 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: editForm.privacy?.showGameLibrary || false, onChange: (e) => handleInputChange('privacy', 'showGameLibrary', e.target.checked), className: "w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-300", children: "Show Game Library" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500", children: "Display your game collection" })] })] }), getCustomItemsByCategory('privacy').map((item, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2 p-3 bg-gray-800/50 rounded-lg", children: [(0, jsx_runtime_1.jsx)("input", { type: "text", value: item.name, onChange: (e) => handleUpdateCustomItem(item.id, { name: e.target.value }), className: "flex-1 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm", placeholder: "Preference name" }), item.type === 'boolean' ? ((0, jsx_runtime_1.jsx)("label", { className: "flex items-center gap-2 text-sm text-gray-300", children: (0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: item.value, onChange: (e) => handleUpdateCustomItem(item.id, { value: e.target.checked }), className: "w-4 h-4" }) })) : item.type === 'select' ? ((0, jsx_runtime_1.jsx)("select", { value: item.value, onChange: (e) => handleUpdateCustomItem(item.id, { value: e.target.value }), className: "px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm", children: item.options?.map(option => ((0, jsx_runtime_1.jsx)("option", { value: option, children: option }, option))) })) : ((0, jsx_runtime_1.jsx)("input", { type: item.type, value: item.value, onChange: (e) => handleUpdateCustomItem(item.id, { value: e.target.value }), className: "px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm w-32", placeholder: "Value" })), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-1", children: [index > 0 && ((0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => handleReorderCustomItems(customItems.findIndex(i => i.id === item.id), customItems.findIndex(i => i.id === item.id) - 1), className: "px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 text-xs", children: "\u2191" })), index < getCustomItemsByCategory('privacy').length - 1 && ((0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => handleReorderCustomItems(customItems.findIndex(i => i.id === item.id), customItems.findIndex(i => i.id === item.id) + 1), className: "px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 text-xs", children: "\u2193" })), (0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => handleRemoveCustomItem(item.id), className: "px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-xs", children: "\u00D7" })] })] }, item.id)))] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "mt-8 border-t border-gray-700 pt-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between mb-6", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-xl font-semibold text-white", children: "Custom Preferences" }), (0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => setShowAddCustomItem(true), className: "px-4 py-2 bg-gaming-accent text-white rounded-lg hover:opacity-90 transition-opacity", children: "+ Add Custom Preference" })] }), showAddCustomItem && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-700", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-medium text-white mb-3", children: "Add New Custom Preference" }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3", children: [(0, jsx_runtime_1.jsx)("input", { type: "text", value: newCustomItem.name || '', onChange: (e) => setNewCustomItem({ ...newCustomItem, name: e.target.value }), className: "px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm", placeholder: "Preference name" }), (0, jsx_runtime_1.jsxs)("select", { value: newCustomItem.type || 'text', onChange: (e) => setNewCustomItem({ ...newCustomItem, type: e.target.value }), className: "px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm", children: [(0, jsx_runtime_1.jsx)("option", { value: "text", children: "Text" }), (0, jsx_runtime_1.jsx)("option", { value: "number", children: "Number" }), (0, jsx_runtime_1.jsx)("option", { value: "boolean", children: "Boolean" }), (0, jsx_runtime_1.jsx)("option", { value: "select", children: "Select" })] }), (0, jsx_runtime_1.jsxs)("select", { value: newCustomItem.category || 'general', onChange: (e) => setNewCustomItem({ ...newCustomItem, category: e.target.value }), className: "px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm", children: [(0, jsx_runtime_1.jsx)("option", { value: "general", children: "General" }), (0, jsx_runtime_1.jsx)("option", { value: "display", children: "Display" }), (0, jsx_runtime_1.jsx)("option", { value: "notifications", children: "Notifications" }), (0, jsx_runtime_1.jsx)("option", { value: "privacy", children: "Privacy" })] }), newCustomItem.type === 'select' && ((0, jsx_runtime_1.jsx)("input", { type: "text", value: newCustomItem.options?.join(', ') || '', onChange: (e) => setNewCustomItem({
                                            ...newCustomItem,
                                            options: e.target.value.split(',').map(opt => opt.trim()).filter(Boolean)
                                        }), className: "px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm md:col-span-2 lg:col-span-3", placeholder: "Options (comma-separated)" })), newCustomItem.type !== 'boolean' && ((0, jsx_runtime_1.jsx)("input", { type: newCustomItem.type === 'number' ? 'number' : 'text', value: newCustomItem.value || '', onChange: (e) => setNewCustomItem({ ...newCustomItem, value: newCustomItem.type === 'number' ? parseFloat(e.target.value) || 0 : e.target.value }), className: "px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm", placeholder: "Default value" }))] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-4 mt-3", children: [(0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-2 text-sm text-gray-300", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: newCustomItem.isPublic || false, onChange: (e) => setNewCustomItem({ ...newCustomItem, isPublic: e.target.checked }), className: "w-4 h-4" }), "Public"] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2 ml-auto", children: [(0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => {
                                                    setShowAddCustomItem(false);
                                                    setNewCustomItem({ name: '', value: '', type: 'text', category: 'general', order: 0, isPublic: false, options: [] });
                                                }, className: "px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm", children: "Cancel" }), (0, jsx_runtime_1.jsx)("button", { type: "button", onClick: handleAddCustomItem, disabled: !newCustomItem.name?.trim(), className: "px-3 py-1 bg-gaming-accent text-white rounded hover:opacity-90 transition-opacity text-sm disabled:opacity-50", children: "Add Preference" })] })] })] })), ['general', 'display', 'notifications', 'privacy'].map(category => {
                        const items = getCustomItemsByCategory(category);
                        if (items.length === 0)
                            return null;
                        return ((0, jsx_runtime_1.jsxs)("div", { className: "mb-6", children: [(0, jsx_runtime_1.jsxs)("h4", { className: "text-lg font-medium text-white mb-3 capitalize", children: [category, " Custom Preferences"] }), (0, jsx_runtime_1.jsx)("div", { className: "space-y-2", children: items.map((item) => ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-3 p-3 bg-gray-800/30 rounded-lg", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex-1", children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-300", children: item.name }), (0, jsx_runtime_1.jsx)("div", { className: "mt-1", children: item.type === 'boolean' ? ((0, jsx_runtime_1.jsxs)("label", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: item.value, onChange: (e) => handleUpdateCustomItem(item.id, { value: e.target.checked }), className: "w-4 h-4" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm text-white", children: item.value ? 'Enabled' : 'Disabled' })] })) : item.type === 'select' ? ((0, jsx_runtime_1.jsx)("select", { value: item.value, onChange: (e) => handleUpdateCustomItem(item.id, { value: e.target.value }), className: "px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm", children: item.options?.map(option => ((0, jsx_runtime_1.jsx)("option", { value: option, children: option }, option))) })) : ((0, jsx_runtime_1.jsx)("input", { type: item.type, value: item.value, onChange: (e) => handleUpdateCustomItem(item.id, { value: e.target.value }), className: "px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm w-full" })) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [item.isPublic && ((0, jsx_runtime_1.jsx)("span", { className: "text-xs px-2 py-1 bg-green-500/20 text-green-400 rounded", children: "Public" })), (0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => handleRemoveCustomItem(item.id), className: "px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-xs", children: "Remove" })] })] }, item.id))) })] }, category));
                    })] })] }));
};
exports.Preferences = Preferences;
